# Pipe4j

[![Build Status](https://travis-ci.org/igventurelli/pipe4j.svg?branch=master)](https://travis-ci.org/igventurelli/pipe4j)

A simple and lightweight Java library to run statements in sequence (like a pipeline!)


## Usage

Pipe4j is based on Functional Interfaces.  
You can use it by declaring a Functional Interface and then, chaining all the statements you need:

```java
import io.pipe4j.Pipe4j;

public void someMethod() {

  Pipe4j<String, Integer> myPipe = (x) -> Integer.valueOf(x); // input: String | output: Integer
  
  Integer value = myPipe.pipe((x) -> x + 1.0) // input: Integer | output: Double
    .pipe((x) -> x.intValue()) // input: Double | output: Integer
    .apply("20"); // the input for the first execution

  System.out.println(value); // 21
}
```

### Exceptions

Yeah, live is not easy (at all) and we need to handle with exceptions.  
Pipe4j gives you a straight forward way to handle exceptions, by using the `SilentThrow#silent()` method:


```java
import io.pipe4j.Pipe4j;
import static io.pipe4j.SilentThrow.silent;

private void run() {

  Pipe4j<String, Integer> myPipe = (x) -> Integer.valueOf(x);

  Integer value = myPipe.pipe((x) -> x + 1.0)
    .pipe((x) -> silent(() -> toInt(x))) // this line throws a IOException
    .apply("20");

    System.out.println(value);
}

public Integer toInt(Double value) throws IOException {
  throw new IOException(); // this is a checked exception, by the way
}
```

You may be asking yourself what about the try/catch block or adding the `throws` statement into the method signature.  
Well, Pipe4j uses _Senaky Throw_ to manage exceptions, so this way, even your statement throws an checked exception, the code will be clear.  
By the way, the code above results in:

```shell
Exception in thread "main" java.io.IOException
  at io.pipe4j.Test.toInt(Test.java:25)
  at ...

```

This is useful in cases when you want to stop the pipeline.  
If you don't want to, you only need to provide a fallback/default value to the `silent()` method:


Fallback:
```java
import io.pipe4j.Pipe4j;
import static io.pipe4j.SilentThrow.silent;

private void run() {

  Pipe4j<String, Integer> myPipe = (x) -> Integer.valueOf(x);

  Integer value = myPipe.pipe((x) -> x + 1.0)
    .pipe((x) -> silent(() -> toInt(x), (e) -> {
      LOG.info("Something is broken", e);
      return fallbackMethod(e);
    }))
    .apply("20");

    System.out.println(value); // 98 (random value generated by the fallbackMethod())
  }

public Integer fallbackMethod(Throwable e) {
  int fallbackValue = ThreadLocalRandom.current().nextInt(0, 100); // generates a random int
  return fallbackValue;
}

public Integer toInt(Double value) throws IOException {
  throw new IOException();
}
```

Default value:

```java
import io.pipe4j.Pipe4j;
import static io.pipe4j.SilentThrow.silent;

private void run() {

  Pipe4j<String, Integer> myPipe = (x) -> Integer.valueOf(x);

  Integer value = myPipe.pipe((x) -> x + 1.0)
    .pipe((x) -> silent(() -> toInt(x), (e) -> 10)) // default value
    .apply("20");

    System.out.println(value); // 10
}

public Integer toInt(Double value) throws IOException {
  throw new IOException();
}
```


## Development Roadmap
- âœ… Finish version `0.1.0` without automated tests
- Grab feedbacks from community :)
- Implement community feedbacks
- Add tests
- Create a Release Candidate (for non-production usage only)
- Fix bugs
- Create the first Release (`1.0.0`)
- Publish to Maven Central and Gradle

## Feedbacks and Bugs report
Please open a issue

## License
[MIT](https://github.com/igventurelli/pipe4j/blob/master/LICENSE.md)
